

  * [ 前言 ](../../)
  * 物联网平台操作 
    * [ 前言 ](../../物联网平台/)
    * 快速开始 
      * [ introduction ](../../物联网平台/quick-start/introduction.html)
      * [ demo ](../../物联网平台/quick-start/demo.html)
    * 开发指南 
      * [ assets ](../../物联网平台/dev-guide/assets.html)
      * [ commons-api ](../../物联网平台/dev-guide/commons-api.html)
      * [ crud ](../../物联网平台/dev-guide/crud.html)
      * [ custom-sql-term ](../../物联网平台/dev-guide/custom-sql-term.html)
      * [ dashboard ](../../物联网平台/dev-guide/dashboard.html)
      * [ device-firmware ](../../物联网平台/dev-guide/device-firmware.html)
      * [ mqtt-subs ](../../物联网平台/dev-guide/mqtt-subs.html)
      * [ multi-tenant ](../../物联网平台/dev-guide/multi-tenant.html)
      * [ websocket-subs ](../../物联网平台/dev-guide/websocket-subs.html)
    * 最佳实践 
      * [ auto-register ](../../物联网平台/best-practices/auto-register.html)
      * [ coap-connection ](../../物联网平台/best-practices/coap-connection.html)
      * [ device-alarm ](../../物联网平台/best-practices/device-alarm.html)
      * [ device-connection ](../../物联网平台/best-practices/device-connection.html)
      * [ device-gateway-connection ](../../物联网平台/best-practices/device-gateway-connection.html)
      * [ http-connection ](../../物联网平台/best-practices/http-connection.html)
      * [ jetlinks对接其他云平台教程-HTTP方式 ](../../物联网平台/best-practices/jetlinks对接其他云平台教程-HTTP方式.html)
      * [ open-api ](../../物联网平台/best-practices/open-api.html)
      * [ sort-link ](../../物联网平台/best-practices/sort-link.html)
      * [ start ](../../物联网平台/best-practices/start.html)
      * [ tcp-connection ](../../物联网平台/best-practices/tcp-connection.html)
      * [ udp-connection ](../../物联网平台/best-practices/udp-connection.html)
    * 使用手册 
      * [ DemoDevice ](../../物联网平台/basics-guide/DemoDevice.html)
      * [ device-manager ](../../物联网平台/basics-guide/device-manager.html)
      * [ protocol-support ](../../物联网平台/basics-guide/protocol-support.html)
      * [ quick-start ](../../物联网平台/basics-guide/quick-start.html)
      * [ rule-engine ](../../物联网平台/basics-guide/rule-engine.html)
      * [ ziduanquanxian ](../../物联网平台/basics-guide/ziduanquanxian.html)
  * 萌蜂项目规范 
    * [ 前言 ](../../萌蜂项目规范/)
    * 一、开发项 
      * [ 快速开始 ](../../萌蜂项目规范/开发项/idea-start.html)
      * [ 环境维护 ](../../萌蜂项目规范/开发项/环境维护.html)
      * [ 代码管理 ](../../萌蜂项目规范/开发项/代码管理.html)
      * [ 后端开发 ](../../萌蜂项目规范/开发项/后端开发.html)
      * [ 前端开发 ](../../萌蜂项目规范/开发项/前端开发.html)
      * [ 工程专项 ](../../萌蜂项目规范/开发项/工程专项.html)
      * [ 其他规约 ](../../萌蜂项目规范/开发项/其他规约.html)
      * [ 流程管理 ](../../萌蜂项目规范/开发项/流程管理.html)
    * 二、知识点 
      * [ 安装 Centos7 ](../../萌蜂项目规范/知识点/install-centos7.html)
      * [ Centos 创建用户 ](../../萌蜂项目规范/知识点/centos-create-user.html)
      * [ Centos 安装桌面环境 ](../../萌蜂项目规范/知识点/centos-install-gnome.html)
      * [ Centos 安装KVM ](../../萌蜂项目规范/知识点/centos-install-kvm.html)
      * [ Centos 安装VNC ](../../萌蜂项目规范/知识点/centos-install-vnc.html)
      * [ Centos 安装Pip ](../../萌蜂项目规范/知识点/centos-install-pip.html)
      * [ Docker Compose ](../../萌蜂项目规范/知识点/docker-compose.html)
      * [ FFmpeg ](../../萌蜂项目规范/知识点/ffmpeg.html)
      * [ Nginx 代理 ](../../萌蜂项目规范/知识点/nginx-prefix.html)
      * [ Nginx Rtmp ](../../萌蜂项目规范/知识点/nginx-rtmp.html)
      * [ Nohup ](../../萌蜂项目规范/知识点/nohup.html)
      * [ NodeJs ](../../萌蜂项目规范/知识点/nodejs-upgrade.html)
      * [ Http Code ](../../萌蜂项目规范/知识点/http-code.html)
      * [ String.format() ](../../萌蜂项目规范/知识点/string-format.html)
  * JAVA开发规范 
    * [ 前言 ](../)
    * 一、编程规约 
      * [ （一）命名风格 ](命名风格.html)
      * [ （二）常量定义 ](常量定义.html)
      * [ （三）代码格式 ](代码格式.html)
      * [ （四）OOP规范 ](OOP规范.html)
      * [ （五）集合处理 ](集合处理.html)
      * [ （六）并发处理 ](并发处理.html)
      * [ （七）控制语句 ](控制语句.html)
      * [ （八）注释规约 ](注释规约.html)
    * 二、异常日志 
      * [ （一）异常处理 ](../异常日志/异常处理.html)
      * [ （二）日志规范 ](../异常日志/日志规约.html)
      * [ （三）其他 ](../异常日志/其他.html)
    * [ 三、单元测试 ](../单元测试.html)
    * [ 四、安全规约 ](../安全规约.html)
    * 五、MySQL数据库 
      * [ （一）建表规约 ](../MySQL数据库/建表规约.html)
      * [ （二）索引规约 ](../MySQL数据库/索引规约.html)
      * [ （三）SQL语句 ](../MySQL数据库/SQL语句.html)
      * [ （四）ORM映射 ](../MySQL数据库/ORM映射.html)
    * 六、工程结构 
      * [ （一）应用分层 ](../工程结构/应用分层.html)
      * [ （二）二方库依赖 ](../工程结构/二方库依赖.html)
      * [ （三）服务器 ](../工程结构/服务器.html)
    * [ 附：本手册专有名词 ](../本手册专有名词.html)
  * MIS系统操作手册 
    * [ MIS系统操作手册 ](../../用户操作手册/用户操作手册.html)
  * MIS系统环境临时记录 
    * [ MIS系统环境临时记录 ](../../MIS系统环境临时记录/组态和大屏连接地址配置.html)
  *   * [ Published with GitBook ](https://www.gitbook.com)

#  __[（七）控制语句](../..)

## (七) 控制语句

  1. 【强制】在一个switch块内，每个case要么通过break/return等来终止，要么注释说明程序将继续执行到哪一个case为止；在一个switch块内，都必须包含一个default语句并且放在最后，即使空代码。
  2. 【强制】在if/else/for/while/do语句中必须使用大括号。即使只有一行代码，避免采用单行的编码方式：
    
        if (condition) statements;

  3. 【强制】在高并发场景中，避免使用"等于"判断作为中断或退出的条件。   
说明：如果并发控制没有处理好，容易产生等值判断被"击穿"的情况，使用大于或小于的区间判断条件来代替。  
  
反例：判断剩余奖品数量等于0时，终止发放奖品，但因为并发处理错误导致奖品数量瞬间变成了负数，这样的话，活动无法终止。

  4. 【推荐】表达异常的分支时，少用if-else方式，这种方式可以改写成：
    
         if (condition) {              
       ...              
       return obj;    
     }   
     // 接着写else的业务逻辑代码;
    

  
说明：如果非得使用if()...else if()...else...方式表达逻辑，【强制】避免后续代码维护困难，请勿超过3层。  
正例：超过3层的 if-else 的逻辑判断代码可以使用卫语句、策略模式、状态模式等来实现，其中卫语句示例如下：

    
        public void today() {      
    if (isBusy()) {   
       System.out.println("change time.");            
       return; 
    }       
    if (isFree()) {  
       System.out.println("go to travel.");             
       return;     
    }  
    System.out.println("stay at home to learn Alibaba Java Coding Guidelines.");      
    return; 
    }
    

  5. 【推荐】除常用方法（如getXxx/isXxx）等外，不要在条件判断中执行其它复杂的语句，将复杂逻辑判断的结果赋值给一个有意义的布尔变量名，以提高可读性。   
说明：很多if语句内的逻辑相当复杂，阅读者需要分析条件表达式的最终结果，才能明确什么样的条件执行什么样的语句，那么，如果阅读者分析逻辑表达式错误呢？  
正例：

    
        // 伪代码如下 final boolean existed = (file.open(fileName, "w") != null) && (...) || (...); 
    if (existed) {    
    ... 
    }
    

反例：

    
        if ((file.open(fileName, "w") != null) && (...) || (...)) {     
    ... 
    }
    

  6. 【推荐】循环体中的语句要考量性能，以下操作尽量移至循环体外处理，如定义对象、变量、获取数据库连接，进行不必要的try-catch操作（这个try-catch是否可以移至循环体外）。
  7. 【推荐】避免采用取反逻辑运算符。   
说明：取反逻辑不利于快速理解，并且取反逻辑写法必然存在对应的正向逻辑写法。  
正例：使用if (x < 628) 来表达 x 小于628。  
反例：使用if (!(x >= 628)) 来表达 x 小于628。

  8. 【推荐】接口入参保护，这种场景常见的是用作批量操作的接口。
  9. 【参考】下列情形，需要进行参数校验：  
1） 调用频次低的方法。  
2） 执行时间开销很大的方法。此情形中，参数校验时间几乎可以忽略不计，但如果因为参数错误导致中间执行回退，或者错误，那得不偿失。  
3） 需要极高稳定性和可用性的方法。  
4） 对外提供的开放接口，不管是RPC/API/HTTP接口。  
5） 敏感权限入口。

  10. 【参考】下列情形，不需要进行参数校验：   
1） 极有可能被循环调用的方法。但在方法说明里必须注明外部参数检查要求。  
2）
底层调用频度比较高的方法。毕竟是像纯净水过滤的最后一道，参数错误不太可能到底层才会暴露问题。一般DAO层与Service层都在同一个应用中，部署在同一台服务器中，所以DAO的参数校验，可以省略。  
3） 被声明成private只会被自己代码所调用的方法，如果能够确定调用方法的代码传入参数已经做过检查或者肯定不会有问题，此时可以不校验参数。

#  results matching ""

# No results matching ""

[ __](并发处理.html) [ __](注释规约.html)

