

  * [ 前言 ](../../)
  * 物联网平台操作 
    * [ 前言 ](../../物联网平台/)
    * 快速开始 
      * [ introduction ](../../物联网平台/quick-start/introduction.html)
      * [ demo ](../../物联网平台/quick-start/demo.html)
    * 开发指南 
      * [ assets ](../../物联网平台/dev-guide/assets.html)
      * [ commons-api ](../../物联网平台/dev-guide/commons-api.html)
      * [ crud ](../../物联网平台/dev-guide/crud.html)
      * [ custom-sql-term ](../../物联网平台/dev-guide/custom-sql-term.html)
      * [ dashboard ](../../物联网平台/dev-guide/dashboard.html)
      * [ device-firmware ](../../物联网平台/dev-guide/device-firmware.html)
      * [ mqtt-subs ](../../物联网平台/dev-guide/mqtt-subs.html)
      * [ multi-tenant ](../../物联网平台/dev-guide/multi-tenant.html)
      * [ websocket-subs ](../../物联网平台/dev-guide/websocket-subs.html)
    * 最佳实践 
      * [ auto-register ](../../物联网平台/best-practices/auto-register.html)
      * [ coap-connection ](../../物联网平台/best-practices/coap-connection.html)
      * [ device-alarm ](../../物联网平台/best-practices/device-alarm.html)
      * [ device-connection ](../../物联网平台/best-practices/device-connection.html)
      * [ device-gateway-connection ](../../物联网平台/best-practices/device-gateway-connection.html)
      * [ http-connection ](../../物联网平台/best-practices/http-connection.html)
      * [ jetlinks对接其他云平台教程-HTTP方式 ](../../物联网平台/best-practices/jetlinks对接其他云平台教程-HTTP方式.html)
      * [ open-api ](../../物联网平台/best-practices/open-api.html)
      * [ sort-link ](../../物联网平台/best-practices/sort-link.html)
      * [ start ](../../物联网平台/best-practices/start.html)
      * [ tcp-connection ](../../物联网平台/best-practices/tcp-connection.html)
      * [ udp-connection ](../../物联网平台/best-practices/udp-connection.html)
    * 使用手册 
      * [ DemoDevice ](../../物联网平台/basics-guide/DemoDevice.html)
      * [ device-manager ](../../物联网平台/basics-guide/device-manager.html)
      * [ protocol-support ](../../物联网平台/basics-guide/protocol-support.html)
      * [ quick-start ](../../物联网平台/basics-guide/quick-start.html)
      * [ rule-engine ](../../物联网平台/basics-guide/rule-engine.html)
      * [ ziduanquanxian ](../../物联网平台/basics-guide/ziduanquanxian.html)
  * 萌蜂项目规范 
    * [ 前言 ](../)
    * 一、开发项 
      * [ 快速开始 ](../开发项/idea-start.html)
      * [ 环境维护 ](../开发项/环境维护.html)
      * [ 代码管理 ](../开发项/代码管理.html)
      * [ 后端开发 ](../开发项/后端开发.html)
      * [ 前端开发 ](../开发项/前端开发.html)
      * [ 工程专项 ](../开发项/工程专项.html)
      * [ 其他规约 ](../开发项/其他规约.html)
      * [ 流程管理 ](../开发项/流程管理.html)
    * 二、知识点 
      * [ 安装 Centos7 ](install-centos7.html)
      * [ Centos 创建用户 ](centos-create-user.html)
      * [ Centos 安装桌面环境 ](centos-install-gnome.html)
      * [ Centos 安装KVM ](centos-install-kvm.html)
      * [ Centos 安装VNC ](centos-install-vnc.html)
      * [ Centos 安装Pip ](centos-install-pip.html)
      * [ Docker Compose ](docker-compose.html)
      * [ FFmpeg ](ffmpeg.html)
      * [ Nginx 代理 ](nginx-prefix.html)
      * [ Nginx Rtmp ](nginx-rtmp.html)
      * [ Nohup ](nohup.html)
      * [ NodeJs ](nodejs-upgrade.html)
      * [ Http Code ](http-code.html)
      * [ String.format() ](string-format.html)
  * JAVA开发规范 
    * [ 前言 ](../../JAVA开发规范/)
    * 一、编程规约 
      * [ （一）命名风格 ](../../JAVA开发规范/编程规约/命名风格.html)
      * [ （二）常量定义 ](../../JAVA开发规范/编程规约/常量定义.html)
      * [ （三）代码格式 ](../../JAVA开发规范/编程规约/代码格式.html)
      * [ （四）OOP规范 ](../../JAVA开发规范/编程规约/OOP规范.html)
      * [ （五）集合处理 ](../../JAVA开发规范/编程规约/集合处理.html)
      * [ （六）并发处理 ](../../JAVA开发规范/编程规约/并发处理.html)
      * [ （七）控制语句 ](../../JAVA开发规范/编程规约/控制语句.html)
      * [ （八）注释规约 ](../../JAVA开发规范/编程规约/注释规约.html)
    * 二、异常日志 
      * [ （一）异常处理 ](../../JAVA开发规范/异常日志/异常处理.html)
      * [ （二）日志规范 ](../../JAVA开发规范/异常日志/日志规约.html)
      * [ （三）其他 ](../../JAVA开发规范/异常日志/其他.html)
    * [ 三、单元测试 ](../../JAVA开发规范/单元测试.html)
    * [ 四、安全规约 ](../../JAVA开发规范/安全规约.html)
    * 五、MySQL数据库 
      * [ （一）建表规约 ](../../JAVA开发规范/MySQL数据库/建表规约.html)
      * [ （二）索引规约 ](../../JAVA开发规范/MySQL数据库/索引规约.html)
      * [ （三）SQL语句 ](../../JAVA开发规范/MySQL数据库/SQL语句.html)
      * [ （四）ORM映射 ](../../JAVA开发规范/MySQL数据库/ORM映射.html)
    * 六、工程结构 
      * [ （一）应用分层 ](../../JAVA开发规范/工程结构/应用分层.html)
      * [ （二）二方库依赖 ](../../JAVA开发规范/工程结构/二方库依赖.html)
      * [ （三）服务器 ](../../JAVA开发规范/工程结构/服务器.html)
    * [ 附：本手册专有名词 ](../../JAVA开发规范/本手册专有名词.html)
  * MIS系统操作手册 
    * [ MIS系统操作手册 ](../../用户操作手册/用户操作手册.html)
  * MIS系统环境临时记录 
    * [ MIS系统环境临时记录 ](../../MIS系统环境临时记录/组态和大屏连接地址配置.html)
  *   * [ Published with GitBook ](https://www.gitbook.com)

#  __[Docker Compose](../..)

### Docker Compose

>   * 使用 Docker Compose 可以轻松、高效的管理容器，它是一个用于定义和运行多容器 Docker 的应用程序工具
>
>   * Docker Compose 将所管理的容器分为三层，分别是工程（project）、服务（service）、容器（container）
>
>   * Docker Compose 运行目录下的所有文件（docker-
> compose.yml）组成一个工程,一个工程包含多个服务，每个服务中定义了容器运行的镜像、参数、依赖，一个服务可包括多个容器实例
>
>

### 检测是否安装 docker compose

    
    
    docker-compose version
    

### 安装

> 这里以按照 `1.27.4` 版本为例，最新版本可以在 <https://github.com/docker/compose/releases>
> 查询到。
    
    
    # 该步骤将 docker-compose 可执行文件下载到目标机器的 /usr/local/bin/docker-compose 位置；
    # 如果网络比较慢，也可以手动下载，然放到 /usr/local/bin/docker-compose 位置。
    sudo curl -L https://github.com/docker/compose/releases/download/1.27.4/docker-compose-$(uname -s)-$(uname -m) -o /usr/local/bin/docker-compose
    
    # 该步骤给 /usr/local/bin/docker-compose 可执行文件授权
    sudo chmod +x /usr/local/bin/docker-compose
    
    # 查看 docker-compose 版本，检查是否安装成功
    docker-compose -v
    

**或 者**

    
    
    pip install docker-compose
    

### docker-compose.yml 属性

> Compose允许用户通过一个docker-compose.yml模板文件（YAML 格式）来定义一组相关联的应用容器为一个项目（project）。
>
> Compose模板文件是一个定义服务、网络和卷的YAML文件。Compose模板文件默认路径是当前目录下的docker-
> compose.yml，可以使用.yml或.yaml作为文件扩展名。 Docker-
> Compose标准模板文件应该包含version、services、networks 三大部分，最关键的是services和networks两个部分。
    
    
    version: '3.3'
    
    services:
      base-gateway:
          build:
            context: ./
            dockerfile: ./base-gateway/Dockerfile
          restart: always
          container_name: base-gateway
          image: base-gateway
          ports:
            - 9999:9999
          depends_on:
            - base-nacos
    volumes:
      logs:
    
    networks:
      powernet:
        driver: 'bridge'
    

  * **version** ：docker-compose的版本号
  * **context** ：Dockerfile的文件路径，也可以是到链接到git仓库的url，当提供的值是相对路径时，被解析为相对于撰写文件的路径，此目录也是发送到Docker守护进程的context
  * **dockerfile** ：使用dockerfile文件来构建，必须指定构建路径
  * **image** ：指定服务的镜像名称或镜像ID。如果镜像在本地不存在，Compose将会尝试拉取镜像
  * **restart** ：重启策略
  * **ports** ：端口映射列表，宿主机端口：容器端口
  * **container_name** ：Compose容器名称格式是：<项目名称><服务名称><序号> 可以自定义项目名称、服务名称，但如果想完全控制容器的命名，可以使用标签指定
  * **hostname** ：容器的hostname
  * **volumes** ：挂载一个目录或者一个已存在的数据卷容器，可以直接使用 [HOST:CONTAINER]格式，或者使用[HOST:CONTAINER:ro]格式，后者对于容器来说，数据卷是只读的，可以有效保护宿主机的文件系统
  * **networks** ：设置网络模式

### 常见指令

#### 1.ps（列出所有运行容器）

    
    
    docker-compose ps
    

#### 2.logs（查看服务日志输出）

    
    
    docker-compose logs
    

#### 3.port（打印绑定的公共端口）

    
    
    docker-compose port base-gateway 9999
    

#### 4.build（构建或者重新构建服务）

    
    
    docker-compose build
    

#### 5.start（启动指定服务已存在的容器）

    
    
    docker-compose start base-gateway
    

#### 6.stop（停止已运行的服务的容器）

    
    
    docker-compose stop base-gateway
    

#### 7.rm（删除指定服务的容器）

    
    
    docker-compose rm base-gateway
    

#### 8.up（构建、启动容器）

    
    
    docker-compose up
    

#### 9.kill（通过发送 SIGKILL 信号来停止指定服务的容器）

    
    
    docker-compose kill base-gateway
    

#### 10.pull（下载服务镜像）

    
    
    docker-compose pull
    

#### 11.scale（设置指定服务运气容器的个数）

    
    
    docker-compose scale base-gateway=3
    

#### 12.run（在一个服务上执行一个命令）

    
    
    docker-compose run web bash
    

#  results matching ""

# No results matching ""

[ __](centos-install-pip.html) [ __](ffmpeg.html)

